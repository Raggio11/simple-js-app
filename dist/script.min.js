let pokemonRepository = (function() {
  document.querySelector('#modal-container'),
    document.querySelector('#image-container');
  let t = [],
    e = 'https://pokeapi.co/api/v2/pokemon/?limit=150';
  function n(e) {
    t.push(e);
  }
  function o(t) {
    pokemonRepository.loadDetails(t).then(function() {
      i(t);
    });
  }
  function i(t) {
    let e = $('.modal-body'),
      n = $('.modal-header'),
      o = $('.modal-title'),
      i = $('#btnClose');
    $('#modal-container').modal('show'), n.empty(), o.empty(), e.empty();
    let a = $('<h3>' + t.name + '</h3>'),
      l = $('<img class="modal-img">');
    l.attr('src', t.imageUrl);
    let c = $('<p>Height : ' + t.height + '</p>'),
      r = $('<p>Weight : ' + t.weight + '</p>');
    n.append(a), e.append(l), e.append(c), e.append(r), n.append(i);
  }
  return (
    document.querySelector('button').addEventListener('click', () => {
      i();
    }),
    {
      add: n,
      getAll: function() {
        return t;
      },
      addListItem: function(t) {
        let e = document.querySelector('#pokemon-list'),
          n = document.createElement('li'),
          i = document.createElement('button');
        (i.innerText = t.name),
          i.classList.add('button-list'),
          i.classList.add('button-class'),
          i.classList.add('btn'),
          i.addEventListener('click', function(e) {
            o(t);
          }),
          n.appendChild(i),
          e.appendChild(n);
      },
      showDetails: o,
      loadList: function() {
        return fetch(e)
          .then(function(t) {
            return t.json();
          })
          .then(function(t) {
            t.results.forEach(function(t) {
              n({ name: t.name, detailsUrl: t.url });
            });
          })
          .catch(function(t) {
            console.error(t);
          });
      },
      loadDetails: function(t) {
        let e = t.detailsUrl;
        return fetch(e)
          .then(function(t) {
            return t.json();
          })
          .then(function(e) {
            (t.name = t.name),
              (t.imageUrl = e.sprites.front_default),
              (t.height = e.height),
              (t.types = e.types),
              (t.weight = e.weight);
          })
          .catch(function(t) {
            console.error(t);
          });
      }
    }
  );
})();
pokemonRepository.loadList().then(function() {
  pokemonRepository.getAll().forEach(function(t) {
    pokemonRepository.addListItem(t);
  });
});
